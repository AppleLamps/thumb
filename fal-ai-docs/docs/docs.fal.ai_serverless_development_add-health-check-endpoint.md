---
url: "https://docs.fal.ai/serverless/development/add-health-check-endpoint"
title: "Add Health Check Endpoint - fal"
---

[Skip to main content](https://docs.fal.ai/serverless/development/add-health-check-endpoint#content-area)

[fal home page![light logo](https://mintcdn.com/fal-d8505a2e/_1QeqsRe91WUAOCJ/logo/light.svg?fit=max&auto=format&n=_1QeqsRe91WUAOCJ&q=85&s=04c374284984bf56c89974379f02b7a2)![dark logo](https://mintcdn.com/fal-d8505a2e/_1QeqsRe91WUAOCJ/logo/dark.svg?fit=max&auto=format&n=_1QeqsRe91WUAOCJ&q=85&s=b136c77964ac416a72cb0bcba775d7c7)](https://fal.ai/)

Search...

Ctrl KAsk AI

Search...

Navigation

Development

Add Health Check Endpoint

[![https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/home.svg](https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/home.svg)Home](https://docs.fal.ai/) [![https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/ar-cube-1.svg](https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/ar-cube-1.svg)Model APIs](https://docs.fal.ai/model-apis) [![https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/rocket.svg](https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/rocket.svg)Serverless](https://docs.fal.ai/serverless) [![https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/chip.svg](https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/chip.svg)Compute](https://docs.fal.ai/compute) [![https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/file-json.svg](https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/file-json.svg)Platform APIs](https://docs.fal.ai/platform-apis) [Changelog](https://docs.fal.ai/changelog)

- [Status](https://status.fal.ai/)
- [Community](https://discord.gg/fal-ai)
- [Blog](https://blog.fal.ai/)

- [Introduction](https://docs.fal.ai/serverless)

- [Connect to Cursor](https://docs.fal.ai/serverless/mcp)

##### Getting Started

- [Quick Start](https://docs.fal.ai/serverless/getting-started/quick-start)
- [Deploy Your First Image Generator](https://docs.fal.ai/serverless/getting-started/deploy-your-first-image-generator)
- [Installation & Setup](https://docs.fal.ai/serverless/getting-started/installation)
- [Core Concepts](https://docs.fal.ai/serverless/getting-started/core-concepts)

##### Tutorials

- [Deploy a Text-to-Image Model](https://docs.fal.ai/serverless/tutorials/deploy-text-to-image-model)
- [Deploy a Text-to-Video Model](https://docs.fal.ai/serverless/tutorials/deploy-text-to-video-model)
- [Deploy a Text-to-Speech Model](https://docs.fal.ai/serverless/tutorials/deploy-text-to-speech-model)
- [Deploy a Text-to-Music Model](https://docs.fal.ai/serverless/tutorials/deploy-text-to-music-model)
- [Deploy a ComfyUI SDXL Turbo App](https://docs.fal.ai/serverless/tutorials/deploy-comfyui-server)
- [Deploy Multi-GPU Inference](https://docs.fal.ai/serverless/tutorials/deploy-multi-gpu-inference)
- [Deploy Models with Custom Containers](https://docs.fal.ai/serverless/tutorials/deploy-models-with-custom-containers)

##### Deployment & Operations

- [Deploy to Production](https://docs.fal.ai/serverless/deployment-operations/deploy-to-production)
- [Manage Deployments](https://docs.fal.ai/serverless/deployment-operations/manage-deployments)
- [Manage Secrets Securely](https://docs.fal.ai/serverless/deployment-operations/manage-secrets-securely)
- [Monitor Performance](https://docs.fal.ai/serverless/deployment-operations/monitor-performance)
- [Scale Your Application](https://docs.fal.ai/serverless/deployment-operations/scale-your-application)

##### Development

- [Handle Inputs and Outputs](https://docs.fal.ai/serverless/development/handle-inputs-and-outputs)
- [Download Model Weights and Files](https://docs.fal.ai/serverless/development/download-model-weights-and-files)
- [Import Code](https://docs.fal.ai/serverless/development/import-code)
- [Use Persistent Storage](https://docs.fal.ai/serverless/development/use-persistent-storage)
- [Streaming Endpoints](https://docs.fal.ai/serverless/development/streaming)
- [Realtime Endpoints](https://docs.fal.ai/serverless/development/realtime)
- [Test Models and Endpoints](https://docs.fal.ai/serverless/development/test-models-and-endpoints)
- [Use a Custom Container Image](https://docs.fal.ai/serverless/development/use-custom-container-image)
- [Handle request cancellations](https://docs.fal.ai/serverless/development/handle-cancellations)
- [Use KV Store](https://docs.fal.ai/serverless/development/use-kv-store)
- [Add Health Check Endpoint](https://docs.fal.ai/serverless/development/add-health-check-endpoint)

##### Multi-GPU Workloads

- [Overview](https://docs.fal.ai/serverless/distributed/overview)
- [Event Streaming](https://docs.fal.ai/serverless/distributed/streaming)
- [API Reference](https://docs.fal.ai/serverless/distributed/api-reference)

##### Advanced Optimizations

- [Optimize Routing Behavior](https://docs.fal.ai/serverless/optimizations/optimize-routing-behavior)
- [Optimize Model Performance](https://docs.fal.ai/serverless/optimizations/optimize-model-performance)
- [Optimize Startup with Compiled Caches](https://docs.fal.ai/serverless/optimizations/optimize-startup-with-compiled-caches)
- [Optimize Container Images](https://docs.fal.ai/serverless/optimizations/optimize-container-images)

##### Migrations

- [Migrate an External Docker Server](https://docs.fal.ai/serverless/migrations/migrate-external-docker-server)
- [Migrate from Replicate](https://docs.fal.ai/serverless/migrations/migrate-from-replicate)

##### CLI Reference

- [Installation](https://docs.fal.ai/serverless/cli/installation)
- [fal auth](https://docs.fal.ai/serverless/cli/auth)
- fal apps

- [fal deploy](https://docs.fal.ai/serverless/cli/deploy)
- [fal files](https://docs.fal.ai/serverless/cli/files)
- [fal run](https://docs.fal.ai/serverless/cli/run)
- [fal queue](https://docs.fal.ai/serverless/cli/queue)
- [fal keys](https://docs.fal.ai/serverless/cli/keys)
- [fal profile](https://docs.fal.ai/serverless/cli/profile)
- [fal secrets](https://docs.fal.ai/serverless/cli/secrets)
- [fal doctor](https://docs.fal.ai/serverless/cli/doctor)
- [fal create](https://docs.fal.ai/serverless/cli/create)
- [fal runners](https://docs.fal.ai/serverless/cli/runners)

##### Python SDK

- [fal.App Class Reference](https://docs.fal.ai/serverless/python/fal-app-reference)
- [fal.api.SyncServerlessClient](https://docs.fal.ai/serverless/python/client)
- [Python SDK API Reference](https://docs.fal.ai/serverless/python/api-reference)

##### API Reference

- [Platform APIs for Serverless](https://docs.fal.ai/serverless/platform-apis)

On this page

- [Basic Usage](https://docs.fal.ai/serverless/development/add-health-check-endpoint#basic-usage)
- [Health Check Configuration](https://docs.fal.ai/serverless/development/add-health-check-endpoint#health-check-configuration)
- [Signaling Unhealthy State](https://docs.fal.ai/serverless/development/add-health-check-endpoint#signaling-unhealthy-state)
- [Automatic Health Checks](https://docs.fal.ai/serverless/development/add-health-check-endpoint#automatic-health-checks)
- [Manual Health Checks](https://docs.fal.ai/serverless/development/add-health-check-endpoint#manual-health-checks)
- [Guidelines](https://docs.fal.ai/serverless/development/add-health-check-endpoint#guidelines)
- [Avoid using GPUs and keep it lightweight](https://docs.fal.ai/serverless/development/add-health-check-endpoint#avoid-using-gpus-and-keep-it-lightweight)
- [Raise exceptions for critical failures only](https://docs.fal.ai/serverless/development/add-health-check-endpoint#raise-exceptions-for-critical-failures-only)

Health check endpoints allow fal to verify that your runners are functioning correctly. When a health check fails, fal will automatically terminate the unhealthy runner and spin up a new one.

## [â€‹](https://docs.fal.ai/serverless/development/add-health-check-endpoint\#basic-usage)  Basic Usage

Use the `health_check` parameter in the `@fal.endpoint()` decorator to configure an endpoint as your health check:

Report incorrect code

Copy

Ask AI

```
import fal
from pydantic import BaseModel

class HealthResponse(BaseModel):
    status: str

class MyApp(fal.App):
    def setup(self):
        self.model = load_model()
        self.connection = connect_to_something()

    @fal.endpoint("/")
    def predict(self, input: Input) -> Output:
        x = self.connection.do_something(input)
        return self.model.run(x)

    @fal.endpoint(
        "/health",
        health_check=fal.HealthCheck(
            start_period_seconds=10,
            timeout_seconds=5,
            failure_threshold=3,
            call_regularly=True,
        ),
    )
    def health(self) -> HealthResponse:
        if not self.connection.is_alive():
            raise RuntimeError("Lost connection to the external service")
        return HealthResponse(status="ok")
```

Only one endpoint can be designated as the health check endpoint per app.

### [â€‹](https://docs.fal.ai/serverless/development/add-health-check-endpoint\#health-check-configuration)  Health Check Configuration

| Parameter | Type | Description | Default |
| --- | --- | --- | --- |
| `start_period_seconds` | int | Minimum time the runner has been running before considering the runner unhealthy when health check fails. | `30` |
| `timeout_seconds` | int | Timeout in seconds for the health check request. | `5` |
| `failure_threshold` | int | Number of consecutive failures before considering the runner as unhealthy. | `3` |
| `call_regularly` | bool | Perform health check every 15s. If false, only do it when the `x-fal-runner-health-check` header is present. | `True` |

To prevent the health check from failing too early, `start_period_seconds` will be replaced by `startup_timeout` of the application if itâ€™s less than it.

### [â€‹](https://docs.fal.ai/serverless/development/add-health-check-endpoint\#signaling-unhealthy-state)  Signaling Unhealthy State

To signal that a runner is unhealthy, **raise an exception** inside your health check endpoint. When fal receives an error response from the health check, it marks the runner as unhealthy.

Report incorrect code

Copy

Ask AI

```
@fal.endpoint("/health", health_check=fal.HealthCheck(failure_threshold=3))
def health(self) -> HealthResponse:
    if not self.connection.is_alive():
        raise RuntimeError("Lost connection to the external service")
    return HealthResponse(status="ok")
```

## [â€‹](https://docs.fal.ai/serverless/development/add-health-check-endpoint\#automatic-health-checks)  Automatic Health Checks

Health checks are performed automatically every 15 seconds.
Automatic health checks are enabled by default. You can disable them by setting `call_regularly` to `False`.

1. **Registration**: The endpoint with `health_check` parameter set is registered as the health check endpoint for your app.
2. **Start period**: Health check failures are ignored if the runner has been running for less than `start_period_seconds` seconds.
3. **Periodic checks**: fal periodically (every 15 seconds) calls this endpoint to verify runner health.
4. **Automatic recovery**: If the health check fails or times out for `failure_threshold` consecutive calls, the runner is terminated and replaced.

The health check endpoint can be called while there might be another request running.Please avoid heavy computations or acquiring critical resources such as GPUs in the health check endpoint
and make sure it does not interfere with the other actual requests.

## [â€‹](https://docs.fal.ai/serverless/development/add-health-check-endpoint\#manual-health-checks)  Manual Health Checks

You can request a health check manually by setting the `x-fal-runner-health-check` header in your regular endpoints.

Report incorrect code

Copy

Ask AI

```
@fal.endpoint("/predict")
def predict(self, input: Input, response: Response) -> Output:
    response.headers["x-fal-runner-health-check"] = "true"
    return self.model.run(input)
```

Manually requested health checks ignores the `failure_threshold` and the `start_period_seconds`.
The runner will be terminated immediately if the manual health check fails.

## [â€‹](https://docs.fal.ai/serverless/development/add-health-check-endpoint\#guidelines)  Guidelines

### [â€‹](https://docs.fal.ai/serverless/development/add-health-check-endpoint\#avoid-using-gpus-and-keep-it-lightweight)  Avoid using GPUs and keep it lightweight

The health check endpoint can be called while there might be another request running.
To make sure it does not interfere with the other actual requests, health checks should be fast and not consume significant resources.Please avoid running inference, heavy computations or acquiring critical resources such as GPUs in your health check endpoint.

Report incorrect code

Copy

Ask AI

```
# Good: Simple status check
@fal.endpoint("/health", fal.HealthCheck(timeout_seconds=10))
def health(self) -> HealthResponse:
    if not self.connection.is_alive():
        raise RuntimeError("Lost connection to the external service")
    return HealthResponse(status="ok")

# Avoid: Running inference in health check
@fal.endpoint("/health", fal.HealthCheck(timeout_seconds=10))
def health(self) -> HealthResponse:
    # Don't do this - it's slow and wastes GPU cycles, it might interfere with the other requests
    test_output = self.model.run(test_input)
    return HealthResponse(status="ok")
```

If you are still concerned about the performance impact of the health check, you can set `call_regularly` to `False` and request a health check manually by setting the `x-fal-runner-health-check` header in your regular endpoints.
See [Request for Health Check](https://docs.fal.ai/serverless/development/add-health-check-endpoint#request-for-health-check) for details.

### [â€‹](https://docs.fal.ai/serverless/development/add-health-check-endpoint\#raise-exceptions-for-critical-failures-only)  Raise exceptions for critical failures only

To avoid unnecessary runner replacements, only raise exceptions for truly unhealthy states that require runner replacement. For non-critical issues, consider logging instead.

Report incorrect code

Copy

Ask AI

```
@fal.endpoint("/health", fal.HealthCheck(timeout_seconds=10))
def health(self) -> HealthResponse:
    if not self.connection.is_alive():
        print("Warning: Connection to the external service is lost")
        try:
            self.connection.reconnect()
            # Non-critical: Lost connection but it was able to reconnect
            print("Successfully reconnected to the external service")
        except Exception as e:
            # Critical: failed to reconnect to the external service
            raise RuntimeError(f"Failed to reconnect to the external service: {e}")

    return HealthResponse(status="ok")
```

Was this page helpful?

YesNo

[Use KV Store\\
\\
Previous](https://docs.fal.ai/serverless/development/use-kv-store) [Overview\\
\\
Next](https://docs.fal.ai/serverless/distributed/overview)

Ctrl+I

### ðŸ”’ Need Serverless Access?

Ã—

Don't have access to fal Serverless yet? Request access to deploy your custom models with instant GPU scaling.


[Request Access](https://fal.ai/dashboard/serverless-get-started)

Assistant

Responses are generated using AI and may contain mistakes.

[Create support ticket](mailto:support@fal.ai)