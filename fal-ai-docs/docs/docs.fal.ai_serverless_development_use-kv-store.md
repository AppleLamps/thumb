---
url: "https://docs.fal.ai/serverless/development/use-kv-store"
title: "Use KV Store - fal"
---

[Skip to main content](https://docs.fal.ai/serverless/development/use-kv-store#content-area)

[fal home page![light logo](https://mintcdn.com/fal-d8505a2e/_1QeqsRe91WUAOCJ/logo/light.svg?fit=max&auto=format&n=_1QeqsRe91WUAOCJ&q=85&s=04c374284984bf56c89974379f02b7a2)![dark logo](https://mintcdn.com/fal-d8505a2e/_1QeqsRe91WUAOCJ/logo/dark.svg?fit=max&auto=format&n=_1QeqsRe91WUAOCJ&q=85&s=b136c77964ac416a72cb0bcba775d7c7)](https://fal.ai/)

Search...

Ctrl KAsk AI

Search...

Navigation

Development

Use KV Store

[![https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/home.svg](https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/home.svg)Home](https://docs.fal.ai/) [![https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/ar-cube-1.svg](https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/ar-cube-1.svg)Model APIs](https://docs.fal.ai/model-apis) [![https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/rocket.svg](https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/rocket.svg)Serverless](https://docs.fal.ai/serverless) [![https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/chip.svg](https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/chip.svg)Compute](https://docs.fal.ai/compute) [![https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/file-json.svg](https://mintlify.s3.us-west-1.amazonaws.com/fal-d8505a2e/images/icons/file-json.svg)Platform APIs](https://docs.fal.ai/platform-apis) [Changelog](https://docs.fal.ai/changelog)

- [Status](https://status.fal.ai/)
- [Community](https://discord.gg/fal-ai)
- [Blog](https://blog.fal.ai/)

- [Introduction](https://docs.fal.ai/serverless)

- [Connect to Cursor](https://docs.fal.ai/serverless/mcp)

##### Getting Started

- [Quick Start](https://docs.fal.ai/serverless/getting-started/quick-start)
- [Deploy Your First Image Generator](https://docs.fal.ai/serverless/getting-started/deploy-your-first-image-generator)
- [Installation & Setup](https://docs.fal.ai/serverless/getting-started/installation)
- [Core Concepts](https://docs.fal.ai/serverless/getting-started/core-concepts)

##### Tutorials

- [Deploy a Text-to-Image Model](https://docs.fal.ai/serverless/tutorials/deploy-text-to-image-model)
- [Deploy a Text-to-Video Model](https://docs.fal.ai/serverless/tutorials/deploy-text-to-video-model)
- [Deploy a Text-to-Speech Model](https://docs.fal.ai/serverless/tutorials/deploy-text-to-speech-model)
- [Deploy a Text-to-Music Model](https://docs.fal.ai/serverless/tutorials/deploy-text-to-music-model)
- [Deploy a ComfyUI SDXL Turbo App](https://docs.fal.ai/serverless/tutorials/deploy-comfyui-server)
- [Deploy Multi-GPU Inference](https://docs.fal.ai/serverless/tutorials/deploy-multi-gpu-inference)
- [Deploy Models with Custom Containers](https://docs.fal.ai/serverless/tutorials/deploy-models-with-custom-containers)

##### Deployment & Operations

- [Deploy to Production](https://docs.fal.ai/serverless/deployment-operations/deploy-to-production)
- [Manage Deployments](https://docs.fal.ai/serverless/deployment-operations/manage-deployments)
- [Manage Secrets Securely](https://docs.fal.ai/serverless/deployment-operations/manage-secrets-securely)
- [Monitor Performance](https://docs.fal.ai/serverless/deployment-operations/monitor-performance)
- [Scale Your Application](https://docs.fal.ai/serverless/deployment-operations/scale-your-application)

##### Development

- [Handle Inputs and Outputs](https://docs.fal.ai/serverless/development/handle-inputs-and-outputs)
- [Download Model Weights and Files](https://docs.fal.ai/serverless/development/download-model-weights-and-files)
- [Import Code](https://docs.fal.ai/serverless/development/import-code)
- [Use Persistent Storage](https://docs.fal.ai/serverless/development/use-persistent-storage)
- [Streaming Endpoints](https://docs.fal.ai/serverless/development/streaming)
- [Realtime Endpoints](https://docs.fal.ai/serverless/development/realtime)
- [Test Models and Endpoints](https://docs.fal.ai/serverless/development/test-models-and-endpoints)
- [Use a Custom Container Image](https://docs.fal.ai/serverless/development/use-custom-container-image)
- [Handle request cancellations](https://docs.fal.ai/serverless/development/handle-cancellations)
- [Use KV Store](https://docs.fal.ai/serverless/development/use-kv-store)
- [Add Health Check Endpoint](https://docs.fal.ai/serverless/development/add-health-check-endpoint)

##### Multi-GPU Workloads

- [Overview](https://docs.fal.ai/serverless/distributed/overview)
- [Event Streaming](https://docs.fal.ai/serverless/distributed/streaming)
- [API Reference](https://docs.fal.ai/serverless/distributed/api-reference)

##### Advanced Optimizations

- [Optimize Routing Behavior](https://docs.fal.ai/serverless/optimizations/optimize-routing-behavior)
- [Optimize Model Performance](https://docs.fal.ai/serverless/optimizations/optimize-model-performance)
- [Optimize Startup with Compiled Caches](https://docs.fal.ai/serverless/optimizations/optimize-startup-with-compiled-caches)
- [Optimize Container Images](https://docs.fal.ai/serverless/optimizations/optimize-container-images)

##### Migrations

- [Migrate an External Docker Server](https://docs.fal.ai/serverless/migrations/migrate-external-docker-server)
- [Migrate from Replicate](https://docs.fal.ai/serverless/migrations/migrate-from-replicate)

##### CLI Reference

- [Installation](https://docs.fal.ai/serverless/cli/installation)
- [fal auth](https://docs.fal.ai/serverless/cli/auth)
- fal apps

- [fal deploy](https://docs.fal.ai/serverless/cli/deploy)
- [fal files](https://docs.fal.ai/serverless/cli/files)
- [fal run](https://docs.fal.ai/serverless/cli/run)
- [fal queue](https://docs.fal.ai/serverless/cli/queue)
- [fal keys](https://docs.fal.ai/serverless/cli/keys)
- [fal profile](https://docs.fal.ai/serverless/cli/profile)
- [fal secrets](https://docs.fal.ai/serverless/cli/secrets)
- [fal doctor](https://docs.fal.ai/serverless/cli/doctor)
- [fal create](https://docs.fal.ai/serverless/cli/create)
- [fal runners](https://docs.fal.ai/serverless/cli/runners)

##### Python SDK

- [fal.App Class Reference](https://docs.fal.ai/serverless/python/fal-app-reference)
- [fal.api.SyncServerlessClient](https://docs.fal.ai/serverless/python/client)
- [Python SDK API Reference](https://docs.fal.ai/serverless/python/api-reference)

##### API Reference

- [Platform APIs for Serverless](https://docs.fal.ai/serverless/platform-apis)

On this page

- [API Reference](https://docs.fal.ai/serverless/development/use-kv-store#api-reference)
- [Initialize KVStore](https://docs.fal.ai/serverless/development/use-kv-store#initialize-kvstore)
- [Methods](https://docs.fal.ai/serverless/development/use-kv-store#methods)
- [Basic Example](https://docs.fal.ai/serverless/development/use-kv-store#basic-example)
- [Common Use Cases](https://docs.fal.ai/serverless/development/use-kv-store#common-use-cases)
- [Caching API Responses](https://docs.fal.ai/serverless/development/use-kv-store#caching-api-responses)
- [Caching Computation Results](https://docs.fal.ai/serverless/development/use-kv-store#caching-computation-results)
- [Important Limitations](https://docs.fal.ai/serverless/development/use-kv-store#important-limitations)
- [Use PostgreSQL/database instead when you need:](https://docs.fal.ai/serverless/development/use-kv-store#use-postgresql%2Fdatabase-instead-when-you-need%3A)
- [Use /data volume instead when you need:](https://docs.fal.ai/serverless/development/use-kv-store#use-%2Fdata-volume-instead-when-you-need%3A)

KVStore provides a way to share small pieces of state across all your serverless runners. Similar to Vercel KV or Cloudflare Workers KV, it requires no setup and uses automatic authentication with your fal credentials.

## [â€‹](https://docs.fal.ai/serverless/development/use-kv-store\#api-reference)  API Reference

### [â€‹](https://docs.fal.ai/serverless/development/use-kv-store\#initialize-kvstore)  Initialize KVStore

Report incorrect code

Copy

Ask AI

```
from fal.toolkit.kv import KVStore

kv = KVStore("myapp")  # "myapp" is your namespace
```

Each namespace is isolated - different `db_name` values create separate key-value stores.

### [â€‹](https://docs.fal.ai/serverless/development/use-kv-store\#methods)  Methods

**`get(key: str) -> Optional[str]`**Retrieve a value from the store. Returns `None` if the key doesnâ€™t exist.

Report incorrect code

Copy

Ask AI

```
value = kv.get("my-key")
if value is None:
    print("Key not found")
```

**`set(key: str, value: str) -> None`**Store a string value. The value must be a string - use `json.dumps()` for objects.

Report incorrect code

Copy

Ask AI

```
import json

# Store a string
kv.set("my-key", "my-value")

# Store an object as JSON
kv.set("config", json.dumps({"enabled": True, "limit": 100}))
```

## [â€‹](https://docs.fal.ai/serverless/development/use-kv-store\#basic-example)  Basic Example

Report incorrect code

Copy

Ask AI

```
import fal
import json
from fal.toolkit.kv import KVStore

class MyApp(fal.App):
    def setup(self):
        self.kv = KVStore("myapp")

    @fal.endpoint("/")
    def process(self, input: Input):
        # Check cache
        cache_key = f"result-{input.id}"
        cached = self.kv.get(cache_key)

        if cached:
            return json.loads(cached)

        # Compute and cache result
        result = self.expensive_operation(input)
        self.kv.set(cache_key, json.dumps(result))

        return result
```

## [â€‹](https://docs.fal.ai/serverless/development/use-kv-store\#common-use-cases)  Common Use Cases

### [â€‹](https://docs.fal.ai/serverless/development/use-kv-store\#caching-api-responses)  Caching API Responses

Cache external API calls to reduce latency and costs:

Report incorrect code

Copy

Ask AI

```
class MyApp(fal.App):
    def setup(self):
        self.kv = KVStore("api-cache")

    @fal.endpoint("/")
    def process(self, input: Input):
        cache_key = f"weather:{input.city}"

        # Check cache
        cached = self.kv.get(cache_key)
        if cached:
            return json.loads(cached)

        # Fetch from external API
        weather = requests.get(f"https://api.weather.com/{input.city}").json()
        self.kv.set(cache_key, json.dumps(weather))

        return weather
```

### [â€‹](https://docs.fal.ai/serverless/development/use-kv-store\#caching-computation-results)  Caching Computation Results

Store results of expensive operations to avoid recomputation:

Report incorrect code

Copy

Ask AI

```
class MyApp(fal.App):
    def setup(self):
        self.kv = KVStore("compute-cache")

    @fal.endpoint("/")
    def process(self, input: Input):
        cache_key = f"result:{input.video_id}"

        cached = self.kv.get(cache_key)
        if cached:
            return json.loads(cached)

        # Expensive video processing
        result = self.process_video(input.video_url)
        self.kv.set(cache_key, json.dumps(result))

        return result
```

## [â€‹](https://docs.fal.ai/serverless/development/use-kv-store\#important-limitations)  Important Limitations

**No Atomic Operations**KVStore does not support atomic increments, locks, or compare-and-swap operations. Race conditions are possible when multiple runners write to the same key simultaneously. This makes it unsuitable for:

- Counters (use Redis INCR instead)
- Locks or semaphores (use Redis or PostgreSQL)
- Any operation requiring atomicity

### [â€‹](https://docs.fal.ai/serverless/development/use-kv-store\#use-postgresql/database-instead-when-you-need:)  Use PostgreSQL/database instead when you need:

- Complex queries
- Relational data
- Strong consistency guarantees
- Transactions

### [â€‹](https://docs.fal.ai/serverless/development/use-kv-store\#use-/data-volume-instead-when-you-need:)  Use `/data` volume instead when you need:

- Large files (>25 MB)
- Model weights or datasets
- File-based storage

See [Use Persistent Storage](https://docs.fal.ai/serverless/development/use-persistent-storage) for more information about the `/data` volume.

Was this page helpful?

YesNo

[Handle request cancellations\\
\\
Previous](https://docs.fal.ai/serverless/development/handle-cancellations) [Add Health Check Endpoint\\
\\
Next](https://docs.fal.ai/serverless/development/add-health-check-endpoint)

Ctrl+I

### ðŸ”’ Need Serverless Access?

Ã—

Don't have access to fal Serverless yet? Request access to deploy your custom models with instant GPU scaling.


[Request Access](https://fal.ai/dashboard/serverless-get-started)

Assistant

Responses are generated using AI and may contain mistakes.

[Create support ticket](mailto:support@fal.ai)